<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shop | FOUR CHARIOTS</title>
  <meta name="description" content="Faith-driven gear. Made to order, just for you." />
  <meta name="robots" content="noindex, nofollow" />

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='16' cy='16' r='15' fill='%230b1a2a'/><text x='16' y='22' text-anchor='middle' font-size='18' font-weight='900' font-family='system-ui,sans-serif' fill='%23ffffff'>4C</text></svg>" />
  <link rel="icon" type="image/png" sizes="192x192" href="images/logo.png" />
  <link rel="apple-touch-icon" href="images/logo.png" />

  <style>
    :root{
      --bg:#ffffff;
      --text:#0a0a0a;
      --muted:#5f6368;
      --line:#e6e6e6;
      --soft:#f6f6f6;
      --ink:#0b1a2a;
      --btn:var(--ink);
      --btnText:#ffffff;
      --btnHover:#142a43;
      --max:1200px;
      --radius:0px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{ box-sizing:border-box; }
    a, button{ cursor:pointer; }
    html{ scroll-behavior:smooth; }
    html,body{ height:100%; }
    [id]{ scroll-margin-top:24px; }
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:var(--bg);
      line-height:1.35;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    a{ color:inherit; text-decoration:none; }
    img{ max-width:100%; display:block; }
    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding: 18px 18px 70px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding: 14px 0;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      text-transform:uppercase;
      letter-spacing:-0.02em;
      font-weight:900;
    }
    .brand .wordmark{
      display:flex;
      flex-direction:column;
      line-height:1;
    }
    .brand .name{
      font-size:14px;
      letter-spacing:0.10em;
    }
    .brand .tag{
      margin-top:4px;
      font-size:11px;
      letter-spacing:0.04em;
      color:var(--muted);
      font-weight:500;
      font-style:normal;
      text-transform:none;
    }
    .mark{
      height:130px;
      width:auto;
      display:block;
    }
    .nav{
      display:flex;
      gap:18px;
      align-items:center;
      font-size:13px;
      color:var(--muted);
    }
    .nav a{
      padding:8px 0;
      border-bottom:2px solid transparent;
    }
    .nav a:hover{
      color:var(--text);
      border-bottom-color:var(--text);
    }
    .ctaRow{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 12px 16px;
      font-size:13px;
      font-weight:800;
      letter-spacing:0.06em;
      text-transform:uppercase;
      border:1px solid var(--text);
      border-radius:var(--radius);
      background:transparent;
      color:var(--text);
      transition: background .2s ease, color .2s ease, border-color .2s ease, transform .2s ease;
      white-space:nowrap;
    }
    .btn:hover{
      background:var(--text);
      color:var(--btnText);
      transform:scale(1.04);
    }
    .btn.primary{
      background:var(--btn);
      color:var(--btnText);
      border-color:var(--btn);
    }
    .btn.primary:hover{
      background:var(--bg);
      color:var(--ink);
      border-color:var(--ink);
      transform:scale(1.04);
    }
    .btn:disabled{
      opacity:.6;
      cursor:not-allowed;
    }
    .divider{ border-top:1px solid var(--line); }

    .pageTitle{
      text-align:center;
      padding: 40px 0 20px;
    }
    .pageTitle h1{
      margin:0;
      font-size: clamp(28px, 3.5vw, 44px);
      text-transform:uppercase;
      letter-spacing:0.10em;
      font-weight:950;
      color:var(--ink);
    }
    .pageTitle p{
      margin:8px 0 0;
      font-size:14px;
      color:var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 18px;
      padding-top: 12px;
      max-width:800px;
      margin:0 auto;
    }
    .product{
      border:1px solid var(--line);
      background: var(--bg);
      display:flex;
      flex-direction:column;
      min-height: 520px;
    }
    .product .media{
      aspect-ratio: 4/3;
      background: #fafafa;
      border-bottom:1px solid var(--line);
      overflow:hidden;
    }
    .product .media img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .product .body{
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height: 170px;
    }
    .product .name{
      margin:0;
      font-weight:950;
      text-transform:uppercase;
      letter-spacing:-0.02em;
      font-size:16px;
      line-height:1.05;
      color:var(--ink);
    }
    .product .desc{
      margin:0;
      color:var(--muted);
      font-size:13px;
      max-width:62ch;
      overflow:hidden;
      display:-webkit-box;
      -webkit-line-clamp:4;
      -webkit-box-orient:vertical;
    }
    .product .bottom{
      margin-top:auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-top:1px solid var(--line);
      padding: 14px 16px;
    }
    .price{
      font-weight:950;
      letter-spacing:-0.02em;
      color:var(--ink);
    }
    .fine{
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
    }

    footer{
      margin-top: 34px;
      padding-top: 18px;
      border-top:1px solid var(--line);
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      color:var(--muted);
      font-size:13px;
    }
    footer .links{ display:flex; gap:14px; flex-wrap:wrap; }
    footer .links a:hover{ color:var(--text); }

    .spinner{
      display:flex;
      justify-content:center;
      align-items:center;
      padding:80px 0;
      grid-column:1/-1;
    }
    .spinner::after{
      content:"";
      width:36px;
      height:36px;
      border:3px solid var(--line);
      border-top-color:var(--ink);
      border-radius:50%;
      animation:spin .7s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg); } }

    /* UNSHAKEN showcase */
    .showcase{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:0;
      border:1px solid var(--line);
      background:var(--bg);
      overflow:hidden;
      max-width:900px;
      margin:12px auto 0;
    }
    .scGallery{
      background:#fafafa;
      border-right:1px solid var(--line);
      display:flex;
      flex-direction:column;
      gap:10px;
      padding:18px;
    }
    .scMainImg{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .scMainImg img{
      max-width:100%;
      max-height:400px;
      object-fit:contain;
      transition: opacity .3s ease;
    }
    .scThumbs{
      display:flex;
      gap:8px;
      justify-content:center;
    }
    .scThumb{
      width:64px;
      height:64px;
      border:2px solid transparent;
      background:var(--soft);
      overflow:hidden;
      cursor:pointer;
      transition: border-color .2s ease;
      padding:4px;
    }
    .scThumb.active{ border-color:var(--ink); }
    .scThumb img{
      width:100%;
      height:100%;
      object-fit:contain;
    }
    .scInfo{
      padding:24px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:12px;
    }
    .scTitle{
      margin:0;
      font-size: clamp(24px, 3vw, 36px);
      line-height:1;
      letter-spacing:-0.03em;
      text-transform:uppercase;
      font-weight:950;
      color:var(--ink);
    }
    .scPrice{
      font-size:20px;
      font-weight:900;
      color:var(--ink);
      letter-spacing:-0.02em;
    }
    .scDesc{
      color:var(--muted);
      font-size:14px;
      line-height:1.6;
      max-width:48ch;
    }
    .scLabel{
      font-size:12px;
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:0.10em;
      color:var(--ink);
    }
    .scLabel .val{
      font-weight:500;
      color:var(--muted);
      text-transform:none;
      letter-spacing:0;
      margin-left:6px;
    }
    .scColors{
      display:flex;
      gap:8px;
    }
    .scSwatch{
      width:34px;
      height:34px;
      border-radius:50%;
      border:2px solid transparent;
      cursor:pointer;
      padding:0;
      background:none;
      transition: border-color .2s ease, transform .15s ease;
    }
    .scSwatch:hover{ transform:scale(1.1); }
    .scSwatch.active{ border-color:var(--ink); }
    .scSwatch .inner{
      width:100%;
      height:100%;
      border-radius:50%;
      border:1px solid var(--line);
    }
    .scMeta{
      padding-top:14px;
      border-top:1px solid var(--line);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .scMetaItem{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted);
    }
    .scMetaItem svg{
      width:16px;
      height:16px;
      flex-shrink:0;
      color:var(--ink);
    }

    .menuBtn{
      display:none;
      background:none;
      border:1px solid var(--line);
      padding:8px 10px;
      cursor:pointer;
      font-size:18px;
      line-height:1;
      color:var(--text);
    }

    @media (max-width: 980px){
      .wrap{ padding: 14px 14px 50px; }
      .mark{ height:90px; }
      .brand .tag{ display:none; }
      .menuBtn{ display:block; }
      .nav{
        display:none;
        position:absolute;
        top:100%;
        left:0;
        right:0;
        background:var(--bg);
        border-bottom:1px solid var(--line);
        flex-direction:column;
        padding:14px 18px;
        gap:0;
        z-index:100;
      }
      .nav.open{ display:flex; }
      .nav a{
        padding:12px 0;
        border-bottom:1px solid var(--line);
        width:100%;
      }
      .nav a:last-child{ border-bottom:none; }
      .ctaRow{ display:none; }
      .topbar{ position:relative; }

      /* Page title */
      .pageTitle{ padding: 28px 0 14px; }
      .pageTitle h1{ font-size: clamp(24px, 7vw, 36px); }

      /* Product grid — single column on mobile */
      .grid{
        grid-template-columns: 1fr;
        gap: 14px;
        max-width: 100%;
      }
      .product{ min-height: auto; }
      .product .media{ aspect-ratio: 4/3; }
      .product .body{ min-height: auto; padding: 14px; gap: 8px; }
      .product .name{ font-size: 15px; }
      .product .desc{ font-size: 12px; -webkit-line-clamp: 3; }
      .product .bottom{ padding: 12px 14px; }

      /* Showcase — stack vertically */
      .showcase{ grid-template-columns: 1fr; }
      .scGallery{ border-right:none; border-bottom:1px solid var(--line); padding:14px; }
      .scMainImg img{ max-height:280px; }
      .scThumbs{ gap:6px; }
      .scThumb{ width:52px; height:52px; }
      .scInfo{ padding:18px; gap:10px; }
      .scTitle{ font-size: clamp(22px, 6vw, 32px); }
      .scPrice{ font-size:18px; }
      .scDesc{ font-size:13px; }
      .scMeta{ gap:6px; }

      /* Footer */
      footer{ flex-direction:column; align-items:flex-start; gap:6px; margin-top:24px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <a class="brand" href="index.html">
        <img class="mark" src="images/logo.png" alt="Four Chariots logo" />
        <span class="wordmark">
          <span class="name">FOUR CHARIOTS</span>
        </span>
      </a>

      <nav class="nav" aria-label="Site navigation">
        <a href="shop.html">Shop</a>
        <a href="about.html">About</a>
        <a href="index.html#drop">The Drop</a>
        <a href="support.html">Support</a>
      </nav>

      <button class="menuBtn" aria-label="Toggle menu" onclick="document.querySelector('.nav').classList.toggle('open')">&#9776;</button>

      <div class="ctaRow">
        <a class="btn" href="shop.html">Shop</a>
        <a class="btn primary" href="shop.html">Checkout</a>
      </div>
    </div>

    <div class="divider"></div>

    <div class="pageTitle">
      <h1>Shop</h1>
      <p>Faith-driven gear. Made to order, just for you.</p>
    </div>

    <!-- Printify product grid (all items) -->
    <section class="grid" id="grid" aria-label="Products"></section>

    <!-- Current Drop divider -->
    <div style="text-align:center; padding:48px 0 20px;">
      <div style="font-size:11px; font-weight:900; text-transform:uppercase; letter-spacing:0.16em; color:var(--muted); margin-bottom:8px;">Current Drop</div>
      <h2 style="margin:0; font-size:clamp(24px,3vw,36px); font-weight:950; text-transform:uppercase; letter-spacing:0.10em; color:var(--ink);">Drop 001</h2>
      <p style="margin:8px 0 0; font-size:14px; color:var(--muted);">One exclusive drop per month. Once it's gone, it's gone.</p>
    </div>

    <!-- UNSHAKEN showcase -->
    <div class="showcase">
      <div class="scGallery">
        <div class="scMainImg">
          <img id="scHeroImg" src="images/unshakenblk.png" alt="UNSHAKEN Tee - Black" />
        </div>
        <div class="scThumbs">
          <div class="scThumb active" data-src="images/unshakenblk.png" data-color="Black" data-hex="#1a1a1a">
            <img src="images/unshakenblk.png" alt="Black" />
          </div>
          <div class="scThumb" data-src="images/unshakenwhite.png" data-color="White" data-hex="#f5f0e1">
            <img src="images/unshakenwhite.png" alt="White" />
          </div>
          <div class="scThumb" data-src="images/unshakenred.png" data-color="Red" data-hex="#8b2232">
            <img src="images/unshakenred.png" alt="Red" />
          </div>
          <div class="scThumb" data-src="images/unshakendap.png" data-color="Dapple" data-hex="#555555">
            <img src="images/unshakendap.png" alt="Dapple" />
          </div>
        </div>
      </div>

      <div class="scInfo">
        <h2 class="scTitle">UNSHAKEN</h2>
        <div class="scPrice">$25.00</div>
        <p class="scDesc">
          A quiet reminder you can carry into work, worship, and ordinary moments.
          Minimal by design. Heavy in meaning. Available in four colorways.
        </p>

        <div>
          <div class="scLabel">Color <span class="val" id="scColorLabel">Black</span></div>
          <div class="scColors" style="margin-top:8px;">
            <button class="scSwatch active" data-color="Black" data-src="images/unshakenblk.png" title="Black">
              <span class="inner" style="background:#1a1a1a"></span>
            </button>
            <button class="scSwatch" data-color="White" data-src="images/unshakenwhite.png" title="White">
              <span class="inner" style="background:#f5f0e1"></span>
            </button>
            <button class="scSwatch" data-color="Red" data-src="images/unshakenred.png" title="Red">
              <span class="inner" style="background:#8b2232"></span>
            </button>
            <button class="scSwatch" data-color="Dapple" data-src="images/unshakendap.png" title="Dapple">
              <span class="inner" style="background:#555555"></span>
            </button>
          </div>
        </div>

        <a class="btn primary" href="shop.html" style="width:100%;margin-top:4px;">Shop now</a>

        <div class="scMeta">
          <div class="scMetaItem">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>
            <span>Made to order, just for you</span>
          </div>
          <div class="scMetaItem">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/></svg>
            <span>Secure checkout via Stripe</span>
          </div>
        </div>

        <div style="padding-top:14px; border-top:1px solid var(--line);">
          <div style="font-size:11px; font-weight:900; text-transform:uppercase; letter-spacing:0.16em; color:var(--muted); margin-bottom:8px;">Connected Verse</div>
          <p style="margin:0; font-size:13px; color:var(--muted); line-height:1.55;">
            Every drop carries a scripture reference chosen to reflect the word on the front.
            For Drop 001, "UNSHAKEN" connects to <strong style="color:var(--ink);">Psalm 16:8</strong>, embroidered quietly on the right sleeve.
          </p>
        </div>
      </div>
    </div>

    <footer>
      <div>© <span id="year"></span> FOUR CHARIOTS</div>
      <div class="links">
        <a href="mailto:you@example.com">Contact</a>
        <a href="YOUR_INSTAGRAM_URL_HERE" target="_blank" rel="noopener">Instagram</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const SUPABASE_URL  = "https://txeemijqgqomfclezonf.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4ZWVtaWpxZ3FvbWZjbGV6b25mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3NjkzMjgsImV4cCI6MjA4NjM0NTMyOH0.boeu2dy3J-L09LRKQrRWPSvTPevynff5ZVwpeaT8oYM";

    function setStatus(msg, kind) {
      if (kind === "error") console.error("[4C]", msg);
      else console.log("[4C]", msg);
    }

    function formatUsdCents(cents) {
      const n = Number(cents || 0);
      return "$" + (n / 100).toFixed(2);
    }

    async function startCheckout(productId, variantId) {
      if (!productId || !variantId) {
        alert("Missing product selection.");
        return;
      }

      setStatus("Opening checkout...", "");
      try {
        const res = await fetch(`${SUPABASE_URL}/functions/v1/create_checkout`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${SUPABASE_ANON}`,
            "apikey": SUPABASE_ANON
          },
          body: JSON.stringify({
            product_id: productId,
            variant_id: Number(variantId),
            quantity: 1
          })
        });

        const data = await res.json();

        if (!res.ok) {
          console.error("create_checkout error:", data);
          setStatus("Checkout failed. See console.", "error");
          return;
        }

        if (!data.url) {
          console.error("create_checkout missing url:", data);
          setStatus("Checkout failed (no URL). See console.", "error");
          return;
        }

        window.location.href = data.url;
      } catch (err) {
        console.error("Checkout error:", err);
        setStatus("Checkout error. See console.", "error");
      }
    }

    const CACHE_KEY = "fc_products";
    const CACHE_TTL = 5 * 60 * 1000; // 5 min browser cache

    function getCachedProducts() {
      try {
        const raw = sessionStorage.getItem(CACHE_KEY);
        if (!raw) return null;
        const { ts, products } = JSON.parse(raw);
        if (Date.now() - ts > CACHE_TTL) return null;
        return products;
      } catch { return null; }
    }

    function setCachedProducts(products) {
      try {
        sessionStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), products }));
      } catch {}
    }

    // Products to hide from the shop grid (by title, case-insensitive)
    const HIDDEN_PRODUCTS = ["olive heart"];

    function renderProducts(products) {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";

      products.filter(p => !HIDDEN_PRODUCTS.some(h => (p.title || "").toLowerCase().includes(h.toLowerCase()))).forEach((p) => {
        const img = p?.images?.[0]?.src || "";
        const enabled = (p?.variants || []).filter(v => v && v.is_enabled);
        const lowest = enabled.length ? Math.min(...enabled.map(v => Number(v.price || 0))) : 0;
        const defaultVariant = enabled[0];

        const card = document.createElement("article");
        card.className = "product";

        card.innerHTML = `
          <a href="product.html?id=${encodeURIComponent(p.id)}" class="media">
            <img src="${img}" alt="${escapeHtml(p.title || "Product")}" loading="lazy">
          </a>
          <div class="body">
            <a href="product.html?id=${encodeURIComponent(p.id)}">
              <h3 class="name">${escapeHtml(p.title || "Untitled")}</h3>
            </a>
            <p class="desc">${escapeHtml(stripHtml(p.description || ""))}</p>
          </div>
          <div class="bottom">
            <div>
              <div class="price">${formatUsdCents(lowest)}</div>
              <div class="fine">Stripe checkout</div>
            </div>
            <a class="btn primary" href="product.html?id=${encodeURIComponent(p.id)}">
              ${defaultVariant ? "View" : "Unavailable"}
            </a>
          </div>
        `;

        grid.appendChild(card);
      });
    }

    async function loadProducts() {
      const grid = document.getElementById("grid");

      // Try browser cache first for instant render
      const cached = getCachedProducts();
      if (cached && cached.length) {
        setStatus("Loaded from cache.", "ok");
        renderProducts(cached);
        // Refresh in background so next visit has fresh data
        fetchProducts().then(fresh => {
          if (fresh) setCachedProducts(fresh);
        });
        return;
      }

      grid.innerHTML = '<div class="spinner"></div>';
      setStatus("Loading products...", "");

      const products = await fetchProducts();
      if (products) {
        setCachedProducts(products);
        renderProducts(products);
        setStatus("Loaded.", "ok");
      }
    }

    async function fetchProducts() {
      try {
        const res = await fetch(`${SUPABASE_URL}/functions/v1/printify`, {
          method: "GET",
          headers: {
            "Authorization": `Bearer ${SUPABASE_ANON}`,
            "apikey": SUPABASE_ANON
          }
        });

        const data = await res.json();
        console.log("PRINTIFY RESPONSE:", data);

        if (!res.ok) {
          console.error("printify function error:", data);
          setStatus("Could not load products. See console.", "error");
          return null;
        }

        const products = data.products || [];
        if (!products.length) {
          setStatus("No products found.", "error");
          return null;
        }

        return products;
      } catch (err) {
        console.error("Could not load products:", err);
        setStatus("Could not load products. See console.", "error");
        return null;
      }
    }

    function stripHtml(html) {
      const tmp = document.createElement("div");
      tmp.innerHTML = html;
      return (tmp.textContent || tmp.innerText || "").replace(/\s+/g, " ").trim();
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    document.querySelectorAll(".nav a").forEach(a => {
      a.addEventListener("click", () => {
        document.querySelector(".nav").classList.remove("open");
      });
    });

    // Load all Printify products into the grid
    loadProducts();

    // Showcase thumbnail + swatch switching
    const scHero = document.getElementById("scHeroImg");
    const scLabel = document.getElementById("scColorLabel");

    document.querySelectorAll(".scThumb").forEach(thumb => {
      thumb.addEventListener("click", () => {
        scHero.src = thumb.dataset.src;
        scHero.alt = "UNSHAKEN Tee - " + thumb.dataset.color;
        if (scLabel) scLabel.textContent = thumb.dataset.color;
        document.querySelectorAll(".scThumb").forEach(t => t.classList.remove("active"));
        thumb.classList.add("active");
        // Sync swatch
        document.querySelectorAll(".scSwatch").forEach(s => {
          s.classList.toggle("active", s.dataset.color === thumb.dataset.color);
        });
      });
    });

    document.querySelectorAll(".scSwatch").forEach(sw => {
      sw.addEventListener("click", () => {
        scHero.src = sw.dataset.src;
        scHero.alt = "UNSHAKEN Tee - " + sw.dataset.color;
        if (scLabel) scLabel.textContent = sw.dataset.color;
        document.querySelectorAll(".scSwatch").forEach(s => s.classList.remove("active"));
        sw.classList.add("active");
        // Sync thumbnail
        document.querySelectorAll(".scThumb").forEach(t => {
          t.classList.toggle("active", t.dataset.color === sw.dataset.color);
        });
      });
    });
  </script>
</body>
</html>
